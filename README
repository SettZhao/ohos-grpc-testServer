用于鸿蒙ohos/grpc-node的测试服务器

# gRPC 流式服务器和客户端示例

这是一个简单的 gRPC 服务器和客户端实现，演示了服务器流式传输 (Server Streaming RPC)。

## 项目结构

```
├── proto/              # Protocol Buffers 定义和生成的代码
│   ├── stream.proto
│   ├── stream.pb.go
│   └── stream_grpc.pb.go
├── testClient/         # 客户端代码
│   └── client.go
├── main.go            # 服务器代码
├── go.mod
└── README
```

## 功能说明

- **服务器**: 实现了一个流式 RPC 服务 `GetNumbers`，可以根据客户端请求生成指定数量的数字序列，并通过流式传输发送给客户端
- **客户端**: 使用 ClientReadableStream 接收服务器发送的流式数据

## 如何运行

### 1. 启动服务器

在项目根目录打开终端，运行:

```bash
go run main.go
```

服务器将在端口 50051 上启动并等待客户端连接。

### 2. 运行客户端

在另一个终端窗口，运行:

```bash
go run testClient/client.go
```

客户端将连接到服务器，请求 10 个数字（每个数字间隔 500ms），并通过流式接收这些数据。

## Proto 定义

服务定义了一个服务器流式 RPC:

```protobuf
service StreamService {
  rpc GetNumbers(NumberRequest) returns (stream NumberResponse) {}
}
```

- 客户端发送一个 `NumberRequest`（包含数量和延迟参数）
- 服务器返回多个 `NumberResponse`（每个包含数字和时间戳）

## 重新生成 Proto 代码

如果修改了 proto 文件，需要重新生成代码:

```bash
protoc --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative proto/stream.proto
```

## 依赖

- Go 1.22.5+
- google.golang.org/grpc
- google.golang.org/protobuf

